export*from"openapi-fetch";import{default as ve,default as Ee}from"openapi-fetch";import*as de from"@effect/platform/FetchHttpClient";import*as D from"@effect/platform/HttpBody";import*as R from"@effect/platform/HttpClient";import*as d from"@effect/platform/HttpClientRequest";import{Effect as c,Match as a}from"effect";const le=e=>{throw new Error(`Unexpected value: ${JSON.stringify(e)}`)},A=e=>e,v=e=>e,O=e=>e,T=e=>e,H=e=>e,b=e=>e,U=e=>e,w=e=>c.gen(function*(){const r=yield*R.HttpClient,t=q(e),n=yield*c.mapError(c.gen(function*(){const s=yield*r.execute(t),o=yield*s.text;return O({status:s.status,headers:J(s.headers),text:o})}),s=>({_tag:"TransportError",error:s instanceof Error?s:new Error(String(s))}));return yield*e.dispatcher(n)}),q=e=>{let n=({get:d.get,post:d.post,put:d.put,patch:d.patch,delete:d.del,head:d.head,options:d.options}[e.method]??d.get)(e.url);if(e.headers!==void 0){const s=k(e.headers);n=d.setHeaders(n,s)}if(e.body!==void 0){const s=typeof e.body=="string"?e.body:JSON.stringify(e.body);n=d.setBody(n,D.text(s))}return n},k=e=>{if(e instanceof Headers){const r={};for(const[t,n]of e.entries())r[t]=n;return r}if(Array.isArray(e)){const r={};for(const t of e){const[n,s]=t;r[n]=s}return r}return e},J=e=>{const r=new Headers;for(const[t,n]of Object.entries(e))r.set(t,n);return r},h=e=>T(r=>{const t=r.headers.get("content-type")??void 0;return e(r.status,t,r.text)}),E=(e,r,t)=>c.try({try:()=>A(JSON.parse(t)),catch:n=>({_tag:"ParseError",status:e,contentType:r,error:n instanceof Error?n:new Error(String(n)),body:t})}),g=(e,r)=>({_tag:"UnexpectedStatus",status:e,body:r}),S=(e,r,t,n)=>({_tag:"UnexpectedContentType",status:e,expected:r,actual:t,body:n}),pe=()=>{const e=(r,t,n)=>{let s=`${n.baseUrl}${String(t)}`;if(n.params!==void 0)for(const[i,u]of Object.entries(n.params))s=s.replace(`{${i}}`,encodeURIComponent(String(u)));if(n.query!==void 0){const i=new URLSearchParams;for(const[u,l]of Object.entries(n.query))i.append(u,String(l));s=`${s}?${i.toString()}`}const o=H({method:r,url:s,dispatcher:n.dispatcher,...n.headers!==void 0&&{headers:n.headers},...n.body!==void 0&&{body:n.body},...n.signal!==void 0&&{signal:n.signal}});return w(o)};return{GET:(r,t)=>e("get",r,t),POST:(r,t)=>e("post",r,t),PUT:(r,t)=>e("put",r,t),PATCH:(r,t)=>e("patch",r,t),DELETE:(r,t)=>e("delete",r,t)}},N=()=>T(e=>{const r=e.headers.get("content-type")??void 0,t=e.status>=200&&e.status<300;if(e.text===""||e.status===204){const n={status:e.status,contentType:"none",body:void 0};return t?c.succeed(n):c.fail({_tag:"HttpError",...n})}return r?.includes("application/json")?c.gen(function*(){const n=yield*E(e.status,"application/json",e.text),s={status:e.status,contentType:"application/json",body:n};return t?s:yield*c.fail({_tag:"HttpError",...s})}):c.fail(S(e.status,["application/json"],r,e.text))});let _;const B=e=>{_=e},x=()=>{if(_===void 0)throw new Error("Default dispatchers are not registered. Import generated dispatchers module.");return U(_)},L=(e,r,t,n)=>{let s=r;if(t)for(const[o,i]of Object.entries(t))s=s.replace("{"+o+"}",encodeURIComponent(String(i)));if(n){const o=new URLSearchParams;for(const[u,l]of Object.entries(n))if(Array.isArray(l))for(const C of l)o.append(u,String(C));else o.set(u,String(l));const i=o.toString();i.length>0&&(s=s.includes("?")?s+"&"+i:s+"?"+i)}return e===void 0||e===""?s:new URL(s,e).toString()},M=e=>typeof e=="string"||e instanceof Blob||e instanceof ArrayBuffer||e instanceof ReadableStream||e instanceof FormData||e instanceof URLSearchParams,$=e=>e===void 0||M(e)?e:JSON.stringify(e),F=e=>e!==void 0&&typeof e!="string"&&!(e instanceof Blob)&&!(e instanceof FormData),P=e=>{const r=new Headers;if(e===void 0)return r;if(e instanceof Headers)return new Headers(e);if(Array.isArray(e)){for(const t of e)Array.isArray(t)&&t.length===2&&r.set(String(t[0]),String(t[1]));return r}for(const[t,n]of Object.entries(e))if(n!=null){if(Array.isArray(n)){r.set(t,n.map(String).join(","));continue}r.set(t,String(n))}return r},I=(e,r)=>{const t=P(e),n=P(r);for(const[s,o]of n.entries())t.set(s,o);return t},j=(e,r)=>(t,n,s)=>{const o=L(r.baseUrl,t,s?.params,s?.query),i=I(r.headers,s?.headers),u=$(s?.body);F(s?.body)&&i.set("Content-Type","application/json");const l=H({method:e,url:o,dispatcher:n,headers:i,body:u,signal:s?.signal});return w(l)},p=(e,r,t)=>(n,s)=>j(e,r)(n,t[n][e],s),fe=(e,r)=>{const t=r??x();return b({GET:p("get",e,t),POST:p("post",e,t),PUT:p("put",e,t),DELETE:p("delete",e,t),PATCH:p("patch",e,t),HEAD:p("head",e,t),OPTIONS:p("options",e,t)})},V=(e,r)=>(t,n)=>j(e,r)(t,N(),n),z=e=>typeof e=="object"&&e!==null&&"_tag"in e&&Reflect.get(e,"_tag")==="HttpError",G=e=>e.pipe(c.catchIf(r=>z(r),r=>c.succeed(r))),f=(e,r)=>(t,n)=>G(V(e,r)(t,n)),ye=e=>b({GET:f("get",e),POST:f("post",e),PUT:f("put",e),DELETE:f("delete",e),PATCH:f("patch",e),HEAD:f("head",e),OPTIONS:f("options",e)}),W=(e,r,t,n)=>c.succeed(n),K=(e,r,t,n)=>c.succeed(n),Q=(e,r,t,n)=>c.succeed(n),X=(e,r,t,n)=>c.succeed(n),Y=(e,r,t,n)=>c.succeed(n),Z=(e,r,t,n)=>c.succeed(n),ee=(e,r,t,n)=>c.succeed(n),te=(e,r,t,n)=>c.succeed(n),re=(e,r,t,n)=>c.succeed(n),ne=(e,r,t,n)=>c.succeed(n),m=(e,r,t,n)=>r?.includes("application/json")?c.gen(function*(){const s=yield*E(e,"application/json",t),o=yield*n(e,"application/json",t,s);return v({status:e,contentType:"application/json",body:o})}):c.fail(S(e,["application/json"],r,t)),y=(e,r,t,n)=>r?.includes("application/json")?c.gen(function*(){const s=yield*E(e,"application/json",t),o=yield*n(e,"application/json",t,s);return yield*c.fail(v({_tag:"HttpError",status:e,contentType:"application/json",body:o}))}):c.fail(S(e,["application/json"],r,t)),se=h((e,r,t)=>a.value(e).pipe(a.when(200,()=>m(200,r,t,W)),a.when(500,()=>y(500,r,t,K)),a.orElse(()=>c.fail(g(e,t))))),ce=h((e,r,t)=>a.value(e).pipe(a.when(201,()=>m(201,r,t,Q)),a.when(400,()=>y(400,r,t,X)),a.when(500,()=>y(500,r,t,Y)),a.orElse(()=>c.fail(g(e,t))))),ae=h((e,r,t)=>a.value(e).pipe(a.when(200,()=>m(200,r,t,Z)),a.when(404,()=>y(404,r,t,ee)),a.when(500,()=>y(500,r,t,te)),a.orElse(()=>c.fail(g(e,t))))),oe=h((e,r,t)=>a.value(e).pipe(a.when(204,()=>c.succeed(v({status:204,contentType:"none",body:void 0}))),a.when(404,()=>y(404,r,t,re)),a.when(500,()=>y(500,r,t,ne)),a.orElse(()=>c.fail(g(e,t))))),ie={"/pets":{get:se,post:ce},"/pets/{petId}":{get:ae,delete:oe}};B(ie);export{de as FetchHttpClient,le as assertNever,ve as createClient,ye as createClientEffect,fe as createClientStrict,h as createDispatcher,pe as createStrictClient,N as createUniversalDispatcher,Q as decodecreatePet_201,X as decodecreatePet_400,Y as decodecreatePet_500,re as decodedeletePet_404,ne as decodedeletePet_500,Z as decodegetPet_200,ee as decodegetPet_404,te as decodegetPet_500,W as decodelistPets_200,K as decodelistPets_500,Ee as default,ce as dispatchercreatePet,oe as dispatcherdeletePet,ae as dispatchergetPet,se as dispatcherlistPets,ie as dispatchersByPath,w as executeRequest,E as parseJSON,B as registerDefaultDispatchers,S as unexpectedContentType,g as unexpectedStatus};
//# sourceMappingURL=index.js.map
