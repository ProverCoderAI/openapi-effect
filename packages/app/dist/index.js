export*from"openapi-fetch";import{default as Se,default as He}from"openapi-fetch";import*as fe from"@effect/platform/FetchHttpClient";import*as C from"@effect/platform/HttpBody";import*as D from"@effect/platform/HttpClient";import*as i from"@effect/platform/HttpClientRequest";import{Effect as c,Match as a}from"effect";const he=e=>{throw new Error(`Unexpected value: ${JSON.stringify(e)}`)},R=e=>e,v=e=>e,O=e=>e,H=e=>e,T=e=>e,b=e=>e,U=e=>e,w=e=>c.gen(function*(){const t=yield*D.HttpClient,r=A(e),n=yield*c.mapError(c.gen(function*(){const s=yield*t.execute(r),o=yield*s.text;return O({status:s.status,headers:k(s.headers),text:o})}),s=>({_tag:"TransportError",error:s instanceof Error?s:new Error(String(s))}));return yield*e.dispatcher(n)}),A=e=>{let n=({get:i.get,post:i.post,put:i.put,patch:i.patch,delete:i.del,head:i.head,options:i.options}[e.method]??i.get)(e.url);if(e.headers!==void 0){const s=q(e.headers);n=i.setHeaders(n,s)}if(e.body!==void 0){const s=typeof e.body=="string"?e.body:JSON.stringify(e.body);n=i.setBody(n,C.text(s))}return n},q=e=>{if(e instanceof Headers){const t={};for(const[r,n]of e.entries())t[r]=n;return t}if(Array.isArray(e)){const t={};for(const r of e){const[n,s]=r;t[n]=s}return t}return e},k=e=>{const t=new Headers;for(const[r,n]of Object.entries(e))t.set(r,n);return t},y=e=>H(t=>{const r=t.headers.get("content-type")??void 0;return e(t.status,r,t.text)}),m=(e,t,r)=>c.try({try:()=>R(JSON.parse(r)),catch:n=>({_tag:"ParseError",status:e,contentType:t,error:n instanceof Error?n:new Error(String(n)),body:r})}),h=(e,t)=>({_tag:"UnexpectedStatus",status:e,body:t}),E=(e,t,r,n)=>({_tag:"UnexpectedContentType",status:e,expected:t,actual:r,body:n}),ge=()=>{const e=(t,r,n)=>{let s=`${n.baseUrl}${String(r)}`;if(n.params!==void 0)for(const[d,f]of Object.entries(n.params))s=s.replace(`{${d}}`,encodeURIComponent(String(f)));if(n.query!==void 0){const d=new URLSearchParams;for(const[f,g]of Object.entries(n.query))d.append(f,String(g));s=`${s}?${d.toString()}`}const o=T({method:t,url:s,dispatcher:n.dispatcher,...n.headers!==void 0&&{headers:n.headers},...n.body!==void 0&&{body:n.body},...n.signal!==void 0&&{signal:n.signal}});return w(o)};return{GET:(t,r)=>e("get",t,r),POST:(t,r)=>e("post",t,r),PUT:(t,r)=>e("put",t,r),PATCH:(t,r)=>e("patch",t,r),DELETE:(t,r)=>e("delete",t,r)}},B=()=>H(e=>{const t=e.headers.get("content-type")??void 0,r=e.status>=200&&e.status<300;if(e.text===""||e.status===204){const n={status:e.status,contentType:"none",body:void 0};return r?c.succeed(n):c.fail({_tag:"HttpError",...n})}return t?.includes("application/json")?c.gen(function*(){const n=yield*m(e.status,"application/json",e.text),s={status:e.status,contentType:"application/json",body:n};return r?s:yield*c.fail({_tag:"HttpError",...s})}):c.fail(E(e.status,["application/json"],t,e.text))});let _;const J=e=>{_=e},N=()=>{if(_===void 0)throw new Error("Default dispatchers are not registered. Import generated dispatchers module.");return U(_)},x=(e,t)=>{if(t===void 0)return e;let r=e;for(const[n,s]of Object.entries(t))r=r.replace("{"+n+"}",encodeURIComponent(String(s)));return r},L=e=>{if(e===void 0)return"";const t=new URLSearchParams;for(const[r,n]of Object.entries(e)){if(Array.isArray(n)){for(const s of n)t.append(r,String(s));continue}t.set(r,String(n))}return t.toString()},M=(e,t)=>t.length===0?e:e.includes("?")?e+"&"+t:e+"?"+t,$=(e,t)=>e===void 0||e===""?t:new URL(t,e).toString(),F=(e,t,r,n)=>{const s=x(t,r),o=L(n),d=M(s,o);return $(e,d)},W=e=>typeof e=="string"||e instanceof Blob||e instanceof ArrayBuffer||e instanceof ReadableStream||e instanceof FormData||e instanceof URLSearchParams,I=e=>e===void 0||W(e)?e:JSON.stringify(e),V=e=>e!==void 0&&typeof e!="string"&&!(e instanceof Blob)&&!(e instanceof FormData),z=e=>{const t=new Headers;for(const[r,n]of Object.entries(e))if(n!=null){if(Array.isArray(n)){t.set(r,n.map(String).join(","));continue}t.set(r,String(n))}return t},S=e=>e===void 0?new Headers:e instanceof Headers?new Headers(e):Array.isArray(e)?new Headers(e):z(e),G=(e,t)=>{const r=S(e),n=S(t);for(const[s,o]of n.entries())r.set(s,o);return r},j=(e,t)=>(r,n,s)=>{const o=F(t.baseUrl,r,s?.params,s?.query),d=G(t.headers,s?.headers),f=I(s?.body);V(s?.body)&&d.set("Content-Type","application/json");const g=T({method:e,url:o,dispatcher:n,headers:d,body:f,signal:s?.signal});return w(g)},u=(e,t,r)=>(n,s)=>j(e,t)(n,r[n][e],s),_e=(e,t)=>{const r=t??N();return b({GET:u("get",e,r),POST:u("post",e,r),PUT:u("put",e,r),DELETE:u("delete",e,r),PATCH:u("patch",e,r),HEAD:u("head",e,r),OPTIONS:u("options",e,r)})},Q=(e,t)=>(r,n)=>j(e,t)(r,B(),n),K=e=>typeof e=="object"&&e!==null&&"_tag"in e&&Reflect.get(e,"_tag")==="HttpError",X=e=>e.pipe(c.catchIf(t=>K(t),t=>c.succeed(t))),l=(e,t)=>(r,n)=>X(Q(e,t)(r,n)),ve=e=>b({GET:l("get",e),POST:l("post",e),PUT:l("put",e),DELETE:l("delete",e),PATCH:l("patch",e),HEAD:l("head",e),OPTIONS:l("options",e)}),Y=(e,t,r,n)=>c.succeed(n),Z=(e,t,r,n)=>c.succeed(n),ee=(e,t,r,n)=>c.succeed(n),te=(e,t,r,n)=>c.succeed(n),re=(e,t,r,n)=>c.succeed(n),ne=(e,t,r,n)=>c.succeed(n),se=(e,t,r,n)=>c.succeed(n),ce=(e,t,r,n)=>c.succeed(n),ae=(e,t,r,n)=>c.succeed(n),oe=(e,t,r,n)=>c.succeed(n),P=(e,t,r,n)=>t?.includes("application/json")?c.gen(function*(){const s=yield*m(e,"application/json",r),o=yield*n(e,"application/json",r,s);return v({status:e,contentType:"application/json",body:o})}):c.fail(E(e,["application/json"],t,r)),p=(e,t,r,n)=>t?.includes("application/json")?c.gen(function*(){const s=yield*m(e,"application/json",r),o=yield*n(e,"application/json",r,s);return yield*c.fail(v({_tag:"HttpError",status:e,contentType:"application/json",body:o}))}):c.fail(E(e,["application/json"],t,r)),ie=y((e,t,r)=>a.value(e).pipe(a.when(200,()=>P(200,t,r,Y)),a.when(500,()=>p(500,t,r,Z)),a.orElse(()=>c.fail(h(e,r))))),de=y((e,t,r)=>a.value(e).pipe(a.when(201,()=>P(201,t,r,ee)),a.when(400,()=>p(400,t,r,te)),a.when(500,()=>p(500,t,r,re)),a.orElse(()=>c.fail(h(e,r))))),ue=y((e,t,r)=>a.value(e).pipe(a.when(200,()=>P(200,t,r,ne)),a.when(404,()=>p(404,t,r,se)),a.when(500,()=>p(500,t,r,ce)),a.orElse(()=>c.fail(h(e,r))))),le=y((e,t,r)=>a.value(e).pipe(a.when(204,()=>c.succeed(v({status:204,contentType:"none",body:void 0}))),a.when(404,()=>p(404,t,r,ae)),a.when(500,()=>p(500,t,r,oe)),a.orElse(()=>c.fail(h(e,r))))),pe={"/pets":{get:ie,post:de},"/pets/{petId}":{get:ue,delete:le}};J(pe);export{fe as FetchHttpClient,he as assertNever,Se as createClient,ve as createClientEffect,_e as createClientStrict,y as createDispatcher,ge as createStrictClient,B as createUniversalDispatcher,ee as decodecreatePet_201,te as decodecreatePet_400,re as decodecreatePet_500,ae as decodedeletePet_404,oe as decodedeletePet_500,ne as decodegetPet_200,se as decodegetPet_404,ce as decodegetPet_500,Y as decodelistPets_200,Z as decodelistPets_500,He as default,de as dispatchercreatePet,le as dispatcherdeletePet,ue as dispatchergetPet,ie as dispatcherlistPets,pe as dispatchersByPath,w as executeRequest,m as parseJSON,J as registerDefaultDispatchers,E as unexpectedContentType,h as unexpectedStatus};
//# sourceMappingURL=index.js.map
